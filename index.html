<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Online Collaboration Agreement</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}

.container{
  width:95%;
  max-width:900px;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(20px);
  border-radius:16px;
  box-shadow:0 25px 50px rgba(0,0,0,0.4);
  overflow:hidden;
}

.header{
  padding:30px;
  text-align:center;
  background:rgba(0,0,0,0.25);
}

.header h1{margin:0;font-size:26px;}
.header p{opacity:0.8;font-size:14px;}

.form{
  padding:30px;
}

h3{
  margin-top:30px;
  color:#ffd369;
}

input,textarea{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:8px;
  border:none;
  outline:none;
  background:rgba(255,255,255,0.2);
  color:#fff;
}

input::placeholder,textarea::placeholder{color:#ddd;}

.locked{
  background:rgba(255,255,255,0.1);
  cursor:not-allowed;
}

.accordion{
  margin-top:15px;
  background:rgba(0,0,0,0.3);
  padding:15px;
  border-radius:10px;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.panel{
  max-height:0;
  overflow:hidden;
  transition:max-height 0.5s ease;
  background:rgba(0,0,0,0.25);
  border-radius:10px;
  margin-top:10px;
  padding:0 15px;
}

.panel label{
  display:block;
  margin:10px 0;
}

.submit{
  margin-top:30px;
  padding:15px;
  font-size:16px;
  width:100%;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:linear-gradient(135deg,#ffd369,#fca311);
  color:#000;
  font-weight:bold;
}

.thankyou{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.8);
  display:none;
  justify-content:center;
  align-items:center;
  text-align:center;
}

.thankyou div{
  background:#111;
  padding:40px;
  border-radius:12px;
}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <h1>Online Collaboration Agreement</h1>
    <p>Digitally valid for remote & online clients</p>
  </div>

  <div class="form">

    <h3>Contract Duration</h3>
    <input type="date" id="startDate" onchange="setEndDate()">
    <input type="date" id="endDate" class="locked" readonly>

    <h3>First Party (Locked)</h3>
    <input value="SARR Incorporation" class="locked" readonly>
    <input value="Pakistan" class="locked" readonly>
    <input value="sarrincorporation@gmail.com" class="locked" readonly>

    <h3>Second Party</h3>
    <input id="spName" placeholder="Full Name">
    <input id="spAddress" placeholder="Address">
    <input id="spContact" placeholder="Email / Contact">

    <h3>Project Details</h3>
    <input id="contentType" placeholder="Content Creation, Marketing, E-commerce">
    <input id="platform" placeholder="YouTube, Amazon, Instagram">
    <textarea id="theme" placeholder="Describe your project idea"></textarea>

    <div class="accordion" onclick="toggleServices()">
      <span>Select Services (Click to open)</span>
      <span>â–¼</span>
    </div>

    <div class="panel" id="servicePanel">
      <label><input type="checkbox" data-price="40000"> Video Editing (40,000 / month)</label>
      <label><input type="checkbox" data-price="35000"> Documentary Editing (35,000)</label>
      <label><input type="checkbox" data-price="45000"> Commercial Editing (45,000)</label>
      <label><input type="checkbox" data-price="25000"> Thumbnail Design (25,000)</label>
      <label><input type="checkbox" data-price="75000"> YouTube Content Pack (75,000)</label>
    </div>

    <h3>Payment</h3>
    <input id="baseMonthly" class="locked" placeholder="Base Monthly Charges" readonly>
    
    <label style="margin-top:10px;">
      <input type="checkbox" id="enableCommission" onchange="toggleCommission()"> I agree to Profit Commission Model
    </label>
    
    <input id="commission" placeholder="Commission % (from profit)" type="number" min="0" max="100" style="display:none" oninput="calculateTotal()">
    <input id="monthlySalary" class="locked" placeholder="Monthly Salary" readonly oninput="calculateTotal()">
    <input id="finalMonthly" class="locked" placeholder="Final Monthly Payable" readonly>
    <input id="totalPayment" class="locked" placeholder="Total Contract (24 Months)" readonly>

    <textarea class="locked" readonly>
50% upfront before start
50% after final delivery
    </textarea>

    <h3>Signature</h3>
    <input value="SARR Incorporation" class="locked" readonly>
    <input id="spSign" placeholder="Type Your Full Name">

    <button class="submit" onclick="submitContract()">Submit Contract</button>

  </div>
</div>

<div class="thankyou" id="thankyou">
  <div>
    <h2>Thank You!</h2>
    <p>Your contract has been submitted successfully.</p>
  </div>
</div>

<audio id="submitSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-confirmation-tone-2867.mp3">
</audio>

<script>
const services = document.querySelectorAll('#servicePanel input');
const baseMonthly = document.getElementById('baseMonthly');
const monthlySalary = document.getElementById('monthlySalary');
const commissionInput = document.getElementById('commission');
const finalMonthly = document.getElementById('finalMonthly');
const totalPayment = document.getElementById('totalPayment');

services.forEach(s => s.addEventListener('change', calculateTotal));

function toggleServices(){
  const panel = document.getElementById("servicePanel");
  panel.style.maxHeight = panel.style.maxHeight ? null : panel.scrollHeight + "px";
}

function setEndDate(){
  const startDate = document.getElementById('startDate');
  const endDate = document.getElementById('endDate');
  if(startDate.value){
    let d = new Date(startDate.value);
    d.setFullYear(d.getFullYear()+2);
    endDate.value = d.toISOString().split("T")[0];
  }
}

function toggleCommission(){
  const enabled = document.getElementById('enableCommission').checked;
  if(enabled){
    commissionInput.style.display = "block";
    monthlySalary.readOnly = false;
    monthlySalary.classList.remove('locked');
  } else {
    commissionInput.style.display = "none";
    monthlySalary.readOnly = true;
    monthlySalary.classList.add('locked');
    commissionInput.value = '';
    calculateTotal();
  }
}

function calculateTotal(){
  let base = 0;
  services.forEach(s => { if(s.checked) base += parseInt(s.dataset.price); });
  baseMonthly.value = base;

  let salary = base;
  if(document.getElementById('enableCommission').checked){
    let commission = parseInt(commissionInput.value)||0;
    let inputSalary = parseInt(monthlySalary.value)||base;
    if(inputSalary > base){
      inputSalary = base;
      monthlySalary.value = base;
      alert("Salary cannot exceed base service price!");
    }
    salary = inputSalary;
  } else {
    monthlySalary.value = base;
  }

  finalMonthly.value = salary;
  totalPayment.value = salary * 24;
}

function submitContract(){
  document.getElementById("submitSound").play();
  generatePDF();
  document.getElementById("thankyou").style.display="flex";
}

function generatePDF(){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  const spName = document.getElementById('spName').value;
  const salary = document.getElementById('finalMonthly').value;
  const total = document.getElementById('totalPayment').value;

  pdf.text(`ONLINE COLLABORATION AGREEMENT`,10,10);
  pdf.text(`Client: ${spName}`,10,20);
  pdf.text(`Final Monthly: ${salary}`,10,30);
  pdf.text(`Total Contract (24 months): ${total}`,10,40);

  pdf.save("Online_Contract.pdf");
}
</script>

</body>
</html>
